# 🔥 전원 관리 가이드

퇴근 시 컴퓨터를 켜두고 갈 때 사용하는 배치 파일 모음입니다.

---

## 📁 배치 파일 목록

### 🏢 퇴근 시

| 파일명 | 설명 | 추천도 |
|--------|------|--------|
| **🔥_전원_절대_안끄기.bat** | **모든 절전 기능 완전 비활성화** | ⭐⭐⭐⭐⭐ |
| 퇴근_전_실행.bat | 기본 절전 방지 + 서버 확인 | ⭐⭐⭐⭐ |
| keep_awake.bat | 간단한 절전 방지만 | ⭐⭐⭐ |

### 🌅 출근 시

| 파일명 | 설명 |
|--------|------|
| **출근_후_실행.bat** | 전원 설정 원래대로 복구 |
| restore_power_settings.bat | 간단한 복구 |

### ⚙️ 추가 설정

| 파일명 | 설명 |
|--------|------|
| Windows_업데이트_재시작_방지.bat | Windows 자동 재시작 방지 (관리자 권한 필요) |

---

## 🚀 사용 방법

### 1️⃣ 퇴근 전 (가장 중요!)

```
1. Cursor에서 서버 실행 확인
2. ngrok 실행 확인
3. 🔥_전원_절대_안끄기.bat 우클릭 → 관리자 권한으로 실행
4. 전원 케이블 연결 확인 ⚡
5. Cursor와 ngrok 창 최소화
6. 퇴근! 👋
```

### 2️⃣ 출근 후

```
1. 출근_후_실행.bat 실행
2. 전원 설정 복구 완료!
```

---

## ✅ 퇴근 전 체크리스트

- [ ] **전원 케이블 연결** ← 가장 중요!
- [ ] Cursor에서 uvicorn 서버 실행 중
- [ ] ngrok 실행 중
- [ ] 🔥_전원_절대_안끄기.bat 실행 완료
- [ ] 창들 최소화 (닫지 않음!)
- [ ] 모니터는 꺼도 OK

---

## 🔥 전원_절대_안끄기.bat가 하는 일

### 비활성화되는 기능들:
1. ❌ 절전 모드
2. ❌ 최대 절전 모드
3. ❌ 모니터 끄기
4. ❌ 하드디스크 끄기
5. ❌ USB 절전
6. ❌ PCI Express 절전
7. ❌ Windows 자동 재시작

### 활성화되는 기능들:
1. ✅ 고성능 전원 모드
2. ✅ CPU 항상 최대 성능
3. ✅ 24시간 활성 시간

---

## ⚠️ 주의사항

### 🔴 필수 사항
- **전원 케이블을 꼭 연결하세요!**
- 노트북 배터리만으로는 밤새 버티지 못합니다

### 🟡 권장 사항
- **관리자 권한으로 실행** (Windows 업데이트 방지 위해)
- 우클릭 → "관리자 권한으로 실행"

### 🟢 선택 사항
- 모니터는 꺼도 됩니다 (컴퓨터는 계속 실행됨)
- 키보드/마우스는 연결 해제 가능

---

## 🛡️ Windows 업데이트 자동 재시작 방지

### 방법 1: 배치 파일 사용
```
Windows_업데이트_재시작_방지.bat 우클릭 → 관리자 권한으로 실행
```

### 방법 2: 수동 설정
1. Windows 설정 열기 (`Win + I`)
2. **업데이트 및 보안** → **Windows Update**
3. **활성 시간 변경**
   - 시작: 오후 6시
   - 종료: 오전 10시

---

## 🔄 서버 실행 방법

### Cursor 터미널에서 (현재 방식)
```powershell
conda activate volumequant
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

### 별도 PowerShell에서 (Cursor 종료해도 실행)
```powershell
# 새 PowerShell 창 열기
cd "C:\dev\react prototype\kairos-ai-prototype"
conda activate volumequant
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

### ngrok 실행
```powershell
# 또 다른 PowerShell 창
ngrok http 8000
```

---

## 💡 팁

### 서버가 실행 중인지 확인
```powershell
# 8000 포트 확인
netstat -ano | findstr ":8000"

# ngrok 확인
tasklist | findstr "ngrok"
```

### 서버 로그 확인
- Cursor 터미널 창을 열어서 로그 확인
- ngrok 창에서 접속 기록 확인

### 원격 접속
- ngrok 창에서 `Forwarding` 주소 확인
- 예: `https://abcd1234.ngrok.io` → 외부에서 접속 가능

---

## 🐛 문제 해결

### Q1: 컴퓨터가 밤에 꺼졌어요
**A:** 전원 케이블이 빠졌거나, Windows 업데이트가 강제로 재시작했을 가능성
- 해결: 전원 케이블 확인 + Windows_업데이트_재시작_방지.bat 실행

### Q2: 서버는 살아있는데 접속이 안 돼요
**A:** ngrok 세션이 만료되었을 가능성 (무료 계정은 2시간 제한)
- 해결: ngrok 유료 요금제 사용 또는 주기적으로 재시작

### Q3: 배터리가 너무 빨리 닳아요
**A:** 고성능 모드로 인한 배터리 소모 증가
- 해결: 반드시 전원 케이블 연결

### Q4: 출근 후 컴퓨터가 뜨거워요
**A:** 밤새 고성능 모드로 작동했기 때문
- 해결: 출근_후_실행.bat로 정상 모드 복구

---

## 📊 배치 파일 비교

| 기능 | keep_awake | 퇴근_전_실행 | 🔥_전원_절대_안끄기 |
|------|------------|--------------|---------------------|
| 절전 방지 | ✅ | ✅ | ✅ |
| 최대 절전 방지 | ✅ | ✅ | ✅ |
| 고성능 모드 | ❌ | ✅ | ✅ |
| USB 절전 방지 | ❌ | ✅ | ✅ |
| CPU 최대 성능 | ❌ | ❌ | ✅ |
| Windows 재시작 방지 | ❌ | ❌ | ✅ |
| 서버 상태 확인 | ❌ | ✅ | ✅ |
| 관리자 권한 필요 | ❌ | 선택 | 권장 |

---

## 🎯 추천 사용 시나리오

### 시나리오 1: 하루만 켜둘 때
```
퇴근_전_실행.bat 사용
```

### 시나리오 2: 주말 내내 켜둘 때 ⭐
```
🔥_전원_절대_안끄기.bat 사용 (관리자 권한)
+ Windows_업데이트_재시작_방지.bat
```

### 시나리오 3: 테스트만 할 때
```
keep_awake.bat 사용
```

---

## 🔗 관련 파일

- `start_all.bat` - uvicorn + ngrok 한 번에 실행
- `start_uvicorn.bat` - uvicorn만 실행
- `start_ngrok.bat` - ngrok만 실행

---

## 📝 작성자 노트

- 모든 배치 파일은 Windows 10/11에서 테스트됨
- 관리자 권한 없이도 대부분 기능 작동
- 보안을 위해 정기적으로 Windows 업데이트 권장

---

**🎉 이제 안심하고 퇴근하세요!**

